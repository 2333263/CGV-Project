<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: targets.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: targets.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>import * as THREE from '../Dependencies/three.module.js';

const loader = new THREE.TextureLoader();
/**
 * @classdesc Targets class, used to handle the target logic and init
 */
class Targets{
    /**
     * 
     * @param {int} name Number of the target
     * @param {THREE.Vector3} position Position of the target
     * @param {THREE.Quaternion} quaternion Rotation of the target
     * @param {THREE.Vector3} endPoint Target's endpoint for motion
     */
    constructor(name, position, quaternion,level,scene,banana){
        this.geometry=new THREE.CylinderGeometry(1,1,0.01,32);
        this.texturelocation=filePath+"Textures/Targets/"
        if(banana){
            this.texturelocation+="B_"
        }
        this.CrossMat=new THREE.MeshBasicMaterial({
            map: loader.load(this.texturelocation+"crosstarget.png")
        });
        this.TickMat=new THREE.MeshBasicMaterial({
            map: loader.load(this.texturelocation+"correctTarget.jpg")
        });
        if(name=='7' &amp;&amp; level==3){
            this.geometry.scale(0.25,0.2,0.22)
          position.y-=0.1
            position.x-=0.05
        }
        this.cylinder=new THREE.Mesh(this.geometry,this.CrossMat)
        this.cylinder.position.copy(position)
        this.cylinder.quaternion.copy(quaternion)
        this.isHit=false;
        this.cylinder.name=name
        this.cp=[]
        this.moves=false
        this.id=-1
       
        this.getCylinder=function (){
            return this.cylinder
        };
    this.hit=function(){
        this.isHit=true;
        this.cylinder.material=this.TickMat
    }

    this.moveTarget=function(time,size){
        const ptime=time*0.01
        const ndx=this.cylinder.id
        const u=ptime+ndx/size
        var pos=new THREE.Vector3()
        var nextPos=new THREE.Vector3()
        this.curve.getPointAt(u%1,pos)
        pos.applyMatrix4(this.curveObject.matrixWorld)
        this.curve.getPointAt((u+0.01)%1,nextPos)
        nextPos.applyMatrix4(this.curveObject.matrixWorld)
        var tempQuat=new THREE.Vector3()
        tempQuat.copy(this.cylinder.quaternion)
        this.cylinder.position.copy(pos)
        this.cylinder.lookAt(nextPos)
        this.cylinder.position.lerpVectors(pos,nextPos,0.5)
        this.cylinder.rotateX(Math.PI/2)
        this.cylinder.rotateZ(Math.PI/2)
        
    }

    this.enableMove=function(id,critPoints){
                    this.id=id
                    this.moves=true
                    this.cp=critPoints
                    const p0=new THREE.Vector3();
                    const p1=new THREE.Vector3();
                    this.curve=new THREE.CatmullRomCurve3(
                    this.cp.map((p,ndx)=>{
                    p0.set(...p);
                    p1.set(...this.cp[(ndx+1)%this.cp.length]);
                    return[
                        (new THREE.Vector3()).copy(p0),
                        (new THREE.Vector3()).lerpVectors(p0, p1, 0.1),
                        (new THREE.Vector3()).lerpVectors(p0, p1, 0.9),
                      ];
                    }).flat(),
                    true,
                  );
                {   
                    const points=this.curve.getPoint(250)
                    const geometry = new THREE.BufferGeometry().setFromPoints(points);
                    const material = new THREE.LineBasicMaterial({color: 0xff0000});
                    this.curveObject = new THREE.Line(geometry, material);
                    material.depthTest=false;
                    this.curveObject.renderOrder=1
                }
    
    }
    }
}
//Final Export
export {Targets}</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="BuildWorld.html">BuildWorld</a></li><li><a href="Entry.html">Entry</a></li><li><a href="leaderBoard.html">leaderBoard</a></li><li><a href="LoadingScreen.html">LoadingScreen</a></li><li><a href="MainMenu.html">MainMenu</a></li><li><a href="musicHandler.html">musicHandler</a></li><li><a href="POSTPROCESSINGPASSES.html">POSTPROCESSINGPASSES</a></li><li><a href="SPARK.html">SPARK</a></li><li><a href="Targets.html">Targets</a></li><li><a href="threeToCannonObj.html">threeToCannonObj</a></li></ul><h3>Global</h3><ul><li><a href="global.html#addTargets">addTargets</a></li><li><a href="global.html#afterLoad">afterLoad</a></li><li><a href="global.html#checkState">checkState</a></li><li><a href="global.html#doneLoading">doneLoading</a></li><li><a href="global.html#drawSkyBox">drawSkyBox</a></li><li><a href="global.html#enableMoving">enableMoving</a></li><li><a href="global.html#filePath">filePath</a></li><li><a href="global.html#gunshotSound">gunshotSound</a></li><li><a href="global.html#handleDoor">handleDoor</a></li><li><a href="global.html#handleSparks">handleSparks</a></li><li><a href="global.html#handleTrails">handleTrails</a></li><li><a href="global.html#hitTarget">hitTarget</a></li><li><a href="global.html#httpUrls">httpUrls</a></li><li><a href="global.html#init">init</a></li><li><a href="global.html#Level1">Level1</a></li><li><a href="global.html#Level2">Level2</a></li><li><a href="global.html#Level3">Level3</a></li><li><a href="global.html#mapTargets">mapTargets</a></li><li><a href="global.html#move">move</a></li><li><a href="global.html#MoveTargets">MoveTargets</a></li><li><a href="global.html#rainSound">rainSound</a></li><li><a href="global.html#removeTargets">removeTargets</a></li><li><a href="global.html#renderWorld">renderWorld</a></li><li><a href="global.html#setStartTime">setStartTime</a></li><li><a href="global.html#stormSky">stormSky</a></li><li><a href="global.html#thunderSound">thunderSound</a></li><li><a href="global.html#worldTargets">worldTargets</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.10</a> on Thu Jun 09 2022 11:04:21 GMT+0200 (South Africa Standard Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
